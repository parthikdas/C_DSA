<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Webcam</title>
</head>
<body>
    <video id="video" autoplay></video>
    <canvas id="canvas" height="400" width="600" style="border: 1px solid red;"></canvas>
    <script>
        // Video Cam
        let video = document.getElementById('video')
        const videoStream = () => {
            navigator.mediaDevices.getUserMedia({ // getUserMedia is a API and takes an object as an argument 
                video: {width: 600, height: 400},
                audio: false // make it true if u also want audio
            })
            .then((stream) => { // and this returns a stream object which is a media stream object
                video.srcObject = stream 
            })
        }

        // Canvas
        // In canvas, (0,0) is top left, not bottom left, Its the normal 2d XY Plane just inverted here +ve side is downward
        let c = /** @type {CanvasRenderingContext2D} */ document.getElementById('canvas') //typecasting just to use vscode canvas intellisense
        let ctx = c.getContext('2d')
        const canvas = () => {
            // ctx.moveTo(0, 0)
            // ctx.lineTo(600, 400) // here first it takes the width then the height
            // ctx.stroke()
            
            //ctx.fillRect(0,340,60,60) // total height - boxheight = 340
            // Function to jumping rectangle but pressing spacebar
            // document.body.onkeyup = function(e) {
            //     if(e.keyCode == 32 || e.keyCode == 38) { //spacebar or uparrow
            //          let margin = 0, flag=false	//margin tells the speed, flag tells whether jumping limit is touched
            //          let dinoHeight = 60 * 2 // how up to jump
            //          let jumpingDiv = setInterval(jumpDiv, 75) // 75 is how fast it will jump
            //          function jumpDiv(){ //Function to move the div
            //              if(margin > dinoHeight) flag = true
            //              if(margin < 0) {
            //                  clearInterval(jumpingDiv)
            //                  spaceClicked = true //now u can do it again
            //              } else {
            //                  ctx.clearRect(0,0,c.height,c.width)
            //                  ctx.fillRect(0,340-margin,60,60)
            //              }
            //              margin +=  flag ? -20 : 20//20 right here effects the speed
            //          } 
            //     }
            // }

            // put the video in canvas
            ctx.drawImage(video, 0, 0, 600, 400)
        }
        videoStream();
        video.addEventListener('loadeddata', () =>{ // After the data is loaded then canvas is called, else it will not show
            setInterval(canvas, 100)
        })
    </script>
</body>
</html>